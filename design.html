<!DOCTYPE html>
<html>

<head>
  <title>HTML Layout Example</title>
  <link rel="stylesheet" type="text/css" href="layout.css">
<script src="fonts.js"></script>
<script src="script.js""></script>
</head>

<body>


  <!-- <div class="main-section"> -->
    <div class="main-top">
      <div class="main-left">
      <div id="grid">
          <!-- Dots will be generated here -->
      </div></div>
      <div class="main-right">
        <div id="pixel-grid"></div>
      <div class="fixed-bottom">
        <button onclick="updateFont()">Update Font</button>
        <button onclick="loadFonts()">Load Old</button>
        <button onclick="loadFontsArray()">Load New</button>
        <button onclick="exportFonts()">Export</button>
<button onclick="clearDots()">Erase</button>
        <input type="file" id="fileInput" style="display: none;" multiple />
      </div>
</div>
    </div>
    <div class="keyboard"></div>
    <!-- <div class="fixed-bottom">
      <button onclick="loadFonts()">Load Fonts</button>
      <button onclick="clearDots()">Erase</button>
      <input type="file" id="fileInput" style="display: none;" multiple />
    </div> -->
  <!-- </div> -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const grid = document.getElementById('pixel-grid');

      // Create 16x16 grid of pixels
      for (let i = 0; i < 32 * 128; i++) {
        const pixel = document.createElement('div');
        pixel.classList.add('pixel');
        pixel.addEventListener('click', function () {
          pixel.classList.toggle('on');
        });
        grid.appendChild(pixel);
      }

      // Example usage: light up a diagonal line
      const pixelsToLightUp = [
        [0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5], [6, 6], [7, 7], [8, 8], [9, 9],
        [10, 10], [11, 11], [12, 12], [13, 13], [14, 14], [15, 15]
      ];
      //  lightUpPixels(pixelsToLightUp);
    });

  </script>

  <script>
    const rows = 16, cols = 1 * 16;
    const linePos = [0, 2, 9, 12, 15];
    const colPos = [0,15];  //0, 15, 31, 47, 63, 79, 95];

    function drawLine(startPt, cls, posDot, topSide) {
      const divider = document.createElement('div');
      divider.classList.add(cls);
      const pos = posDot.getBoundingClientRect();
      divider.style.top = (topSide ? pos.top : pos.bottom) + 'px';
      divider.style.width = (pos.right - startPt) + 'px';
      grid.appendChild(divider);
    }

    function drawVLine(startPt, cls, posDot, topSide) {
      const divider = document.createElement('div');
      divider.classList.add(cls);
      const pos = posDot.getBoundingClientRect();
      divider.style.left = (topSide ? pos.left : pos.right) + 'px';
      divider.style.height = (pos.bottom - startPt) + 'px';
      grid.appendChild(divider);
    }

function createGrid() {
        const grid = document.getElementById('grid');
        grid.style.gridTemplateColumns = `repeat(${cols}, 8px)`;
        const hLineDots = {};
        const vLineDots = {};
        var dotRect, topPos, leftPos;
        for (let row = 0; row < rows; row++) {
            for (let col = 0; col < cols; col++) {
                const dot = document.createElement('div');
                dot.classList.add('dot');
                dot.dataset.row = row;
                dot.dataset.col = col;
                dot.addEventListener('click',
                    () => toggleDot(dot, row, col));

                grid.appendChild(dot);

                // capture horizontal line positions
                if (col == (cols - 1) && linePos.includes(row)) {
                  hLineDots[row] = dot;
                }

                if (row == 0 && !topPos) {
                    topPos = dot.getBoundingClientRect().top;
                }

                if (col == 0 && !leftPos) {
                    leftPos = dot.getBoundingClientRect().left;
                }

                // capture vertical line positions
                if (row == (rows - 1) && colPos.includes(col)) {
                    vLineDots[col] = dot;
                }
            }
        }

        // draw horizontal lines
        for (pos of linePos) {
          drawLine(leftPos, 'divider', hLineDots[pos], pos==0)
        }

        // draw vertical lines
        for (pos of colPos) {
         // drawVLine(topPos, 'divider-v', vLineDots[pos], pos==0)
        }
    }
    window.onload = createGrid;
  </script>
</body>

</html>